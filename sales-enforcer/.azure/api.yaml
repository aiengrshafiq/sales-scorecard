# sales-enforcer/.azure/api.yaml
template:
  containers:
    - name: sales-enforcer-api
      image: ${{ REGISTRY_SERVER }}/sales-enforcer:${{ GITHUB_SHA }}
      command:
        - uvicorn
        - main:app
        - --host
        - 0.0.0.0
        - --port
        - 80
      env:
        - name: DATABASE_URL
          secretRef: db-url
        - name: REDIS_URL
          secretRef: redis-url
        - name: PIPEDRIVE_API_TOKEN
          secretRef: pipedrive-token
ingress:
  external: true
  targetPort: 80